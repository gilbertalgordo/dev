import json

# 1. Define the AI core logic (Simulated/Placeholder)
# In a real application, this function would call an external LLM API
# (like Google's Gemini, OpenAI's GPT, etc.) with a detailed prompt.
def generate_itinerary_ai(destination: str, days: int, interests: list, budget: str) -> dict:
    """
    Simulates calling an AI model to generate a personalized travel itinerary.
    
    In a real system, the prompt would instruct the AI to be accurate 
    (scientific reasoning for real-world details like time/distance) and 
    to provide clear, structured output (instances).
    """
    
    # --- This is where the powerful AI generation would happen ---
    # For this example, we'll use a hard-coded, structured instance based on input:
    
    if destination.lower() == "tokyo":
        itinerary = {
            "title": f"The {budget.capitalize()} Tokyo Adventure: {days} Days of {', '.join(interests)}",
            "Day 1": [
                {"time": "Morning", "place": "Meiji Jingu Shrine", "activity": "Experience a peaceful instance of Shinto culture and vast gardens."},
                {"time": "Afternoon", "place": "Harajuku (Takeshita Street)", "activity": "Witness vibrant street fashion. Instance: Visit a crepe stand for lunch."},
                {"time": "Evening", "place": "Shinjuku Gyoen National Garden (Illumination)", "activity": "Relax in the park then see the evening lights. Accurate scientific reasoning: The gardens are a highly rated instance of Japanese-Western fusion landscaping."},
            ],
            "Day 2": [
                {"time": "All Day", "place": "Ghibli Museum (Mitaka)", "activity": "An instance of anime magic. **Requires pre-booked ticket (Accuracy)**."},
            ],
            "notes": "Always check operating hours and consider a prepaid Suica/Pasmo card for transportation (Clear Voice/Accuracy)."
        }
    else:
        # Default/Fallback instance for any other destination
        itinerary = {
            "title": f"Your Custom {destination} Trip: {days} Days",
            "Day 1": [
                {"time": "Morning", "place": "Local Landmark", "activity": f"Explore a major {destination} landmark, matching your {interests} interest."},
                {"time": "Afternoon", "place": "Food & Culture Spot", "activity": f"Find an instance of local cuisine within your {budget}."},
            ],
            "notes": f"This is a placeholder. A real AI would generate a fully personalized plan using scientific reasoning on geography and logistics."
        }
        
    return itinerary

# 2. Define the User Interaction / HUD (Simple Console Interface)
def run_travel_ai():
    """
    Main function to run the travel planning tool and display the HUD.
    """
    
    print("--- âœˆï¸ Travel AI Planner HUD (Heads-Up Display) ---")
    print("Welcome! Let's create your perfect trip instance.")
    
    # Get user input (simple form of HUD data entry)
    destination = input("1. Where do you want to go? (e.g., Tokyo): ")
    try:
        days = int(input("2. How many days will you travel? (e.g., 4): "))
    except ValueError:
        print("**[Clear Voice]** Invalid input for days. Defaulting to 3.")
        days = 3
        
    interests_input = input("3. What are your main interests? (comma-separated, e.g., food, history, nature): ")
    interests = [i.strip() for i in interests_input.split(',')]
    
    budget = input("4. What is your budget? (e.g., low, medium, high): ")
    
    print("\n[Processing Request... Ensuring **Accurate Scientific Reasoning** for logistics...]")
    
    # 3. Generate the itinerary instance
    final_itinerary = generate_itinerary_ai(destination, days, interests, budget)
    
    # 4. Display the result (The final HUD view)
    print("\n--- âœ… GENERATED ITINERARY INSTANCE (Clear Voice Output) ---")
    print(f"**{final_itinerary.get('title', 'Trip Plan')}**")
    print("-" * 50)
    
    # Display the structured instance data
    for day, plans in final_itinerary.items():
        if day.startswith("Day"):
            print(f"\n### {day}")
            for item in plans:
                print(f"* {item['time']}: **{item['place']}** - {item['activity']}")
                
    if 'notes' in final_itinerary:
        print(f"\n> **AI Notes (Accuracy):** {final_itinerary['notes']}")
        
    print("-" * 50)
    print("**HUD Status:** Itinerary generation complete. Safe travels!")

# Execute the code
if __name__ == "__main__":
    run_travel_ai()



import time
import random
import json
from datetime import datetime, timedelta

# --- Configuration & Helper Data (Scientific Reasoning Basis) ---
# Simulates a database or API for real-time, accurate data.
FLIGHT_DATA = {
    "Tokyo": {"price_range": (800, 1500), "duration": 12},
    "Paris": {"price_range": (500, 1100), "duration": 8},
}

HOTEL_DATA = {
    "Tokyo": {"low": 80, "medium": 150, "high": 350},
    "Paris": {"low": 70, "medium": 130, "high": 300},
}

ATTRACTIONS = {
    "Tokyo": [
        {"name": "Senso-ji Temple", "type": "history", "time_needed": 3, "cost": 0, "priority": 1},
        {"name": "Akihabara", "type": "tech/shopping", "time_needed": 4, "cost": 50, "priority": 2},
        {"name": "Ghibli Museum", "type": "art", "time_needed": 4, "cost": 15, "priority": 1},
        {"name": "Shibuya Crossing", "type": "landmark", "time_needed": 2, "cost": 0, "priority": 3},
    ],
}

class TravelAIAgent:
    """
    An advanced agent for generating accurate, constraints-based travel instances.
    Prioritizes accurate scientific reasoning for scheduling and budgeting.
    """
    
    def __init__(self, user_preferences: dict):
        self.preferences = user_preferences
        self.log = []

    def _simulate_live_data_fetch(self, city: str, component: str) -> float:
        """
        Simulates retrieving real-time data for accuracy (scientific data instance).
        """
        self.log.append(f"Fetching **{component}** data for {city}...")
        
        if component == "flight":
            low, high = FLIGHT_DATA.get(city, {}).get("price_range", (700, 1400))
            return round(random.uniform(low, high), 2)
        elif component == "hotel":
            budget_key = self.preferences.get('budget', 'medium')
            price = HOTEL_DATA.get(city, {}).get(budget_key, 150)
            return price
        return 0.0

    def calculate_accurate_budget(self) -> dict:
        """
        Applies scientific reasoning to calculate the total estimated trip cost.
        """
        city = self.preferences['destination']
        days = self.preferences['days']
        
        # 1. Transportation cost (Accuracy)
        flight_cost = self._simulate_live_data_fetch(city, "flight")
        
        # 2. Accommodation cost (Instance based on user budget)
        hotel_nightly_cost = self._simulate_live_data_fetch(city, "hotel")
        total_hotel_cost = hotel_nightly_cost * days
        
        # 3. Estimated daily spending (Scientific assumption based on budget level)
        daily_spending_map = {'low': 75, 'medium': 150, 'high': 300}
        daily_spending = daily_spending_map.get(self.preferences.get('budget'), 150)
        total_daily_spending = daily_spending * days
        
        total_trip_cost = flight_cost + total_hotel_cost + total_daily_spending
        
        return {
            "flight": flight_cost,
            "lodging": total_hotel_cost,
            "activities_food": total_daily_spending,
            "total_estimated": round(total_trip_cost, 2)
        }

    def generate_constrained_itinerary(self) -> dict:
        """
        Uses a simple constraint satisfaction algorithm to build the schedule.
        This provides complex, structured "instances" of daily plans.
        """
        city = self.preferences['destination']
        days = self.preferences['days']
        interests = set(self.preferences['interests'])
        
        available_attractions = ATTRACTIONS.get(city, [])
        
        # Filter attractions based on user interest (Constraint 1)
        filtered_attractions = [
            a for a in available_attractions 
            if any(interest in a['type'] for interest in interests) or interests == {'any'}
        ]
        
        # Sort by priority and time needed (Scientific Scheduling)
        filtered_attractions.sort(key=lambda x: (x['priority'], -x['time_needed']), reverse=True)
        
        itinerary = {}
        attractions_to_schedule = filtered_attractions.copy()
        
        # Simple Greedy Constraint Solver
        for day in range(1, days + 1):
            day_key = f"Day {day}"
            itinerary[day_key] = []
            current_time = 0 # Time in hours (e.g., 9:00 AM to 5:00 PM is 8 hours)
            MAX_HOURS_PER_DAY = 8
            
            i = 0
            while i < len(attractions_to_schedule) and current_time < MAX_HOURS_PER_DAY:
                attraction = attractions_to_schedule[i]
                time_needed = attraction['time_needed']
                
                if current_time + time_needed <= MAX_HOURS_PER_DAY:
                    itinerary[day_key].append({
                        "name": attraction['name'],
                        "duration": f"{time_needed} hrs",
                        "cost": f"${attraction['cost']}",
                        "note": f"Instance of {attraction['type']} experience."
                    })
                    current_time += time_needed
                    # Mark for removal (or remove and adjust index)
                    attractions_to_schedule.pop(i) 
                else:
                    i += 1
                    
        return itinerary

# --- Example Execution (The HUD) ---
def run_advanced_travel_ai_hud():
    """
    Provides a clear, structured HUD (Heads-Up Display) for the advanced agent.
    """
    
    print("--- ðŸ§  ADVANCED TRAVEL AI AGENT HUD v2.0 ---")
    
    # 1. Get detailed user input
    preferences = {
        'destination': input("1. Destination (e.g., Tokyo, Paris): ") or "Tokyo",
        'days': int(input("2. Number of days: ") or 4),
        'interests': [i.strip() for i in (input("3. Interests (e.g., history, food, tech): ") or "history, tech").split(',')],
        'budget': input("4. Budget level (low, medium, high): ") or "medium",
        'start_date': datetime.now().strftime("%Y-%m-%d") # Real-time context
    }
    
    # Create the Agent instance
    ai_agent = TravelAIAgent(preferences)
    print("\n[Processing... Applying **Accurate Scientific Reasoning** and Constraint Solving...]")
    
    time.sleep(1) # Simulate complex computation
    
    # 2. Calculate Budget Instance (Financial Accuracy)
    budget_instance = ai_agent.calculate_accurate_budget()
    
    # 3. Generate Itinerary Instance (Scheduling Accuracy)
    itinerary_instance = ai_agent.generate_constrained_itinerary()
    
    # 4. Display Results (Clear Voice/HUD Output)
    print("\n" + "="*60)
    print("      âœ… ITINERARY & FINANCIAL INSTANCE GENERATED (Clear Voice)     ")
    print("="*60)
    
    # --- FINANCIAL HUD SECTION ---
    print("\n### ðŸ’µ Financial Accuracy Report (Scientific Reasoning)")
    print(f"| Component | Cost Instance |")
    print("| :--- | :--- |")
    print(f"| Flight Est. | ${budget_instance['flight']:,.2f} |")
    print(f"| Lodging Est. | ${budget_instance['lodging']:,.2f} |")
    print(f"| Daily Est. | ${budget_instance['activities_food']:,.2f} |")
    print(f"| **TOTAL TRIP** | **${budget_instance['total_estimated']:,.2f}** |")
    
    print("\n" + "-"*60)
    
    # --- ITINERARY HUD SECTION ---
    print("### ðŸ—ºï¸ Constraints-Based Itinerary Instance")
    for day, activities in itinerary_instance.items():
        print(f"\n**{day} (Date: {(datetime.strptime(preferences['start_date'], '%Y-%m-%d') + timedelta(days=int(day.split()[-1]) - 1)).strftime('%b %d')})**")
        if activities:
            for activity in activities:
                print(f"* **{activity['name']}** ({activity['duration']}) - {activity['note']} | Cost: {activity['cost']}")
        else:
            print("* [No major activities scheduled - Free time/Travel instance]")
            
    print("\n" + "="*60)
    print("AI Status: **System Complete**. Enjoy your trip!")
    
if __name__ == "__main__":
    run_advanced_travel_ai_hud()
