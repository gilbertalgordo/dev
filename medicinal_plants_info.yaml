# CODE TEMPLATE FOR MEDICINAL PLANT INFORMATION SEARCH

# --- 1. Data Structure (Simulated Database) ---
# NOTE: In a real-world application, this data would be fetched from a
# structured source like a SQL database, a dedicated API (e.g., USDA Plants Database,
# Dr. Duke's Phytochemical and Ethnobotanical Databases), or a large CSV file.

MEDICINAL_PLANTS_DB = {
    "Chamomile": {
        "Scientific_Name": "Matricaria recutita",
        "Plant_Part_Used": ["Flower"],
        "Active_Compounds": ["Flavonoids", "Terpenoids (e.g., Bisabolol)"],
        "Primary_Uses": ["Anxiety and Relaxation", "Digestive Support (anti-spasmodic)", "Anti-inflammatory"],
        "How_To_Prepare": {
            "Infusion (Tea)": "Steep 1-2 teaspoons of dried flowers in 8oz (240ml) of hot, *not boiling*, water for 5-10 minutes. Strain and drink. Ideal for anxiety and stomach ache.",
            "Compress/Wash": "Brew a strong infusion, allow it to cool, and use it to bathe irritated skin or as an eye rinse (must be completely clean and strained)."
        },
        "Safety_Notes": "Generally safe. May interact with blood-thinners or sedatives. Allergic reactions possible, especially if sensitive to the daisy family (ragweed, chrysanthemums)."
    },
    "Ginger": {
        "Scientific_Name": "Zingiber officinale",
        "Plant_Part_Used": ["Rhizome (Root)"],
        "Active_Compounds": ["Gingerols", "Shogaols"],
        "Primary_Uses": ["Nausea and Motion Sickness", "Anti-inflammatory", "Digestive Aid"],
        "How_To_Prepare": {
            "Fresh Decoction (Boil)": "Slice 1 inch of fresh, peeled rhizome and simmer in 2 cups of water for 10-20 minutes. Strain and drink. Best for persistent digestive issues or anti-inflammatory effect.",
            "Tincture": "Soak finely chopped fresh root in a high-proof alcohol/water mixture for 4-6 weeks, shaking daily. Strain. Use drops for quick relief of acute nausea."
        },
        "Safety_Notes": "Generally safe. May cause mild heartburn in large doses. Check with a doctor if on blood-thinning medication due to mild antiplatelet effects."
    }
    # ... more plants would be added here
}

# --- 2. In-Depth Search Function ---

def in_depth_plant_search(plant_name):
    """
    Performs a detailed, case-insensitive search for a medicinal plant
    in the database and prints all relevant information.

    Args:
        plant_name (str): The common name of the plant to search for.
    """
    # Normalize the search term
    search_key = plant_name.strip().title()

    if search_key in MEDICINAL_PLANTS_DB:
        plant_data = MEDICINAL_PLANTS_DB[search_key]

        print(f"üåø **In-Depth Report for: {search_key}**")
        print("---")

        # üîç Scientific and Core Data
        print(f"**Scientific Name:** {plant_data['Scientific_Name']}")
        print(f"**Parts Used:** {', '.join(plant_data['Plant_Part_Used'])}")
        print(f"**Key Compounds:** {', '.join(plant_data['Active_Compounds'])}")
        
        # üíä Medicinal Uses
        print("\n## Medicinal Uses")
        for use in plant_data['Primary_Uses']:
            print(f"* {use}")

        # üßë‚Äçüç≥ How to Prepare and Use (The 'How To')
        print("\n## Preparation Methods ('How To')")
        for method, instructions in plant_data['How_To_Prepare'].items():
            print(f"### {method}")
            print(f"> {instructions}")
        
        # ‚ö†Ô∏è Safety Information (Crucial)
        print("\n## Important Safety Notes")
        print(f"**WARNING:** {plant_data['Safety_Notes']}")
        print("\n*Always consult with a qualified herbalist or healthcare provider before using medicinal plants.*")

    else:
        print(f"‚ùå Search Error: The plant '{search_key}' was not found in the database.")
        print("Please check the spelling or try a different plant.")

# --- 3. Example Usage ---
# Use one of the plants we defined
print("--- Search Example 1 ---")
in_depth_plant_search("Chamomile")

print("\n\n--- Search Example 2 ---")
in_depth_plant_search("Ginger")

print("\n\n--- Search Example 3 (Failed) ---")
in_depth_plant_search("Aloe Vera")



pip install requests beautifulsoup4 pandas




import requests
from bs4 import BeautifulSoup
import pandas as pd
from pprint import pprint
import time

class PhytomedicineSearcher:
    """
    An advanced class for deep searching medicinal plant data.
    Simulates scraping an external ethnobotanical database
    and stores/processes results in a structured Pandas DataFrame.
    """
    def __init__(self, base_url="https://example-ethnobotany-db.org/"):
        # The base URL of a simulated ethnobotany database
        self.base_url = base_url
        self.headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
        }
        # DataFrame to store all collected data for multi-criteria search
        self.data_frame = pd.DataFrame(columns=[
            'Common_Name', 'Scientific_Name', 'Part_Used', 'Primary_Use', 
            'Key_Phytochemicals', 'Preparation_Method', 'Safety_Notes'
        ])

    def _simulate_web_scrape(self, plant_name):
        """
        [ADVANCED STEP: WEB SCRAPING]
        Simulates fetching and parsing a detailed page for a specific plant.
        In a real scenario, you would inspect the target site's HTML elements 
        (e.g., specific <div> or <table> classes) to extract data.
        
        Note: The URL and HTML parsing are placeholders.
        """
        print(f"üì° Attempting deep search for '{plant_name}'...")
        # Simulate a small delay to avoid overwhelming the server (ethical scraping)
        time.sleep(1) 

        # --- SIMULATED DATA (Replace with actual scraping logic) ---
        if plant_name.lower() == "turmeric":
            return {
                'Scientific_Name': 'Curcuma longa',
                'Part_Used': 'Rhizome',
                'Primary_Use': 'Anti-inflammatory, Antioxidant, Digestive Health',
                'Key_Phytochemicals': 'Curcuminoids (Curcumin)',
                'Preparation_Method': 'Decoction/Golden Paste: Simmer powder in milk/water with black pepper (to increase bioavailability) for 10 min. Best for chronic inflammation.',
                'Safety_Notes': 'Generally safe; high doses may cause stomach upset. Avoid if you have bile duct obstruction or are on blood thinners.'
            }
        elif plant_name.lower() == "st. john's wort":
            return {
                'Scientific_Name': 'Hypericum perforatum',
                'Part_Used': 'Flower and leaves (aerial parts)',
                'Primary_Use': 'Mild to moderate depression, Nerve pain',
                'Key_Phytochemicals': 'Hypericin, Hyperforin',
                'Preparation_Method': 'Tincture: Steep fresh plant material in alcohol (50% ABV) for 4-6 weeks in a dark container. Use drops daily. Tinctures best extract Hyperforin.',
                'Safety_Notes': 'SERIOUS drug interactions (e.g., contraceptives, antidepressants, HIV drugs). Causes sun sensitivity. MUST consult a doctor before use.'
            }
        else:
            return None

    def search_and_process(self, plant_list):
        """
        Iterates through a list of plants, scrapes data for each, and populates
        the main DataFrame.
        """
        new_data = []
        for plant in plant_list:
            data = self._simulate_web_scrape(plant)
            if data:
                # Add the common name to the dictionary
                data['Common_Name'] = plant.title()
                new_data.append(data)
                print(f"‚úÖ Data found for {plant.title()}.")
            else:
                print(f"‚ùå No data found for {plant.title()}.")

        # Concatenate new data with the existing DataFrame
        if new_data:
            self.data_frame = pd.concat([self.data_frame, pd.DataFrame(new_data)], ignore_index=True)
            print("\nDatabase updated with new search results.")
        
        # Ensure 'Key_Phytochemicals' is treated as a string for robust searching
        self.data_frame['Key_Phytochemicals'] = self.data_frame['Key_Phytochemicals'].astype(str)

    def in_depth_analysis(self, search_term, search_field='Common_Name'):
        """
        [ADVANCED SEARCH FEATURE]
        Performs an in-depth, multi-field search on the DataFrame and
        prints results in a highly detailed, instance-based format (HUD-style).
        
        Args:
            search_term (str): The term to search for.
            search_field (str): The column to search within (e.g., 'Common_Name', 
                                'Primary_Use', 'Key_Phytochemicals').
        """
        if self.data_frame.empty:
            print("üö® Database is empty. Run search_and_process() first.")
            return

        print(f"\nüî¨ **IN-DEPTH ANALYSIS: '{search_term}' in '{search_field}'**")
        print("---")

        # Perform case-insensitive, partial string matching
        results = self.data_frame[
            self.data_frame[search_field].str.contains(search_term, case=False, na=False)
        ]

        if results.empty:
            print("No matching records found in the structured data.")
            return

        # Output in a clear, 'instance' (HUD-like) format as requested
        for index, row in results.iterrows():
            print(f"\n>>> INSTANCE ID: {index+1} | {row['Common_Name'].upper()} <<<")
            print("------------------------------------------------------------------")
            
            # --- BOTANICAL CLASSIFICATION ---
            print(f"**SCIENTIFIC NAME:**\t\t {row['Scientific_Name']}")
            print(f"**PLANT PART USED:**\t\t {row['Part_Used']}")
            
            # --- PHARMACOGNOSY ---
            print(f"\n**KEY PHYTOCHEMICALS:**\t {row['Key_Phytochemicals']}")
            print(f"**PRIMARY THERAPEUTIC USE:** {row['Primary_Use']}")
            
            # --- APPLICATION/HOW-TO ---
            print(f"\n**PREPARATION METHOD (HOW TO):**")
            # Clear voices: Using detailed bullet points
            for line in row['Preparation_Method'].split(': '):
                 if line.startswith('Decoction') or line.startswith('Tincture'):
                     print(f"* **{line.split(':')[0]}**: {': '.join(line.split(':')[1:])}")
                 else:
                     print(f"* {line}")
            
            # --- SAFETY & ACCURACY ---
            print(f"\n**‚ö†Ô∏è SAFETY & INTERACTIONS (ACCURATE SCIENTIFIC REASONING):**")
            print(f"> {row['Safety_Notes']}")
            print("------------------------------------------------------------------")
            
        print(f"\n**Total Records Found:** {len(results)}")

# --- Example Usage ---

# 1. Initialize the searcher
searcher = PhytomedicineSearcher()

# 2. Search for and gather initial data (simulating web scraping)
initial_plants = ["Turmeric", "St. John's Wort", "Ginseng"] # Ginseng will fail to show a 'No data found' example
searcher.search_and_process(initial_plants)

# 3. Perform an in-depth search by Common Name (The Primary Request)
searcher.in_depth_analysis("Turmeric", search_field='Common_Name')

# ---
# 4. Perform an advanced search using a therapeutic effect (Multi-Criteria Search)
# This demonstrates the power of the pandas DataFrame for complex querying.
searcher.in_depth_analysis("Anti-inflammatory", search_field='Primary_Use')

# ---
# 5. Search for a specific compound (Phytochemical Screening)
searcher.in_depth_analysis("Curcumin", search_field='Key_Phytochemicals')
