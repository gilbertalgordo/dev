import random

def get_ten_codes_ai_lookup():
    """
    A simple dictionary acting as a '10-Codes AI' database 
    to look up the meaning of common 10-Codes.
    """
    ten_codes = {
        "10-1": "Receiving poorly",
        "10-2": "Receiving well",
        "10-3": "Stop transmitting",
        "10-4": "Acknowledgement (Roger)",
        "10-5": "Relay message",
        "10-6": "Busy, stand by",
        "10-7": "Out of service (O/S)",
        "10-8": "In service (I/S)",
        "10-9": "Repeat last message",
        "10-10": "Off duty",
        "10-20": "Location",
        "10-23": "Arrived at scene",
        "10-33": "Emergency / High Priority Traffic",
        "10-42": "Traffic accident",
        "10-55": "Intoxicated driver",
        "10-99": "Wanted/Stolen indicated"
    }
    
    return ten_codes

def lookup_code(code):
    """
    Looks up the meaning of a 10-Code.
    """
    codes = get_ten_codes_ai_lookup()
    
    # Normalize input for better matching
    normalized_code = code.strip().upper()

    if normalized_code in codes:
        print(f"âœ… Code **{normalized_code}** means: **{codes[normalized_code]}**")
    else:
        print(f"âŒ Code **{normalized_code}** not found in the database. Try another code.")

def run_simulation():
    """
    Main function to run the 10-Codes lookup simulation.
    """
    print("--- 10-Codes Lookup Simulator ---")
    print("This AI-like system helps you look up the meaning of 10-Codes.")
    
    # Display available codes for reference
    codes = get_ten_codes_ai_lookup()
    print("\n*Available Codes:*", ", ".join(codes.keys()))
    
    while True:
        user_input = input("\nEnter a 10-Code (e.g., 10-4, 10-20) or type 'exit' to quit: ")
        
        if user_input.lower() == 'exit':
            print("Simulator shut down. 10-4.")
            break
        
        if user_input:
            lookup_code(user_input)
        else:
            # Example of a simple AI-like random response for empty input
            random_code = random.choice(list(codes.keys()))
            print(f"No code entered. Did you mean **{random_code}**? It means **{codes[random_code]}**.")

# Execute the main function
if __name__ == "__main__":
    run_simulation()



import nltk
from nltk.tokenize import word_tokenize
# Import from a real NLP library for production use
# from sklearn.feature_extraction.text import TfidfVectorizer
# from sklearn.linear_model import LogisticRegression 

# --- 1. The Full 10-Code Database (Extended from previous) ---
TEN_CODES_DB = {
    "10-4": "Acknowledgement/Roger",
    "10-7": "Out of Service (O/S)",
    "10-8": "In Service (I/S)",
    "10-20": "Location",
    "10-33": "Emergency/Need immediate assistance",
    "10-50": "Motor Vehicle Accident (MVA)",
    "10-51": "Wrecker/Tow truck needed",
    "10-52": "Ambulance needed",
    "10-55": "Intoxicated Driver/DUI",
    "10-57": "Hit and Run",
    "10-99": "Wanted/Stolen indicated",
    # Add more codes here to improve model training data
}

# --- 2. Mock NLP Model (Rule-Based for Demonstration) ---

def mock_nlp_model(text: str) -> list[str]:
    """
    A conceptual function that simulates an NLP model's prediction.
    In a real system, this would be a trained Machine Learning model.
    It translates a natural language phrase into a list of 10-Codes.
    """
    # 1. Preprocessing: Tokenization and Lowercasing
    tokens = word_tokenize(text.lower())
    
    # 2. Rule-Based/Keyword Matching (Simulating ML Feature Extraction)
    matched_codes = []
    
    if "accident" in tokens or "crash" in tokens or "mva" in tokens:
        matched_codes.append("10-50")
    
    if "ambulance" in tokens or "medic" in tokens or "injuries" in tokens:
        matched_codes.append("10-52")

    if "tow" in tokens or "wrecker" in tokens or "vehicle disabled" in tokens:
        # Check if 10-50 is already matched before adding wrecker code
        if "10-50" in matched_codes:
             matched_codes.append("10-51") 
        else:
             matched_codes.append("10-51")

    if "drunk" in tokens or "intoxicated" in tokens or "dui" in tokens:
        matched_codes.append("10-55")
        
    if "emergency" in tokens or "assistance" in tokens or "officer needs help" in tokens:
        matched_codes.append("10-33")
        
    if "where" in tokens and "location" in tokens or "20" in tokens:
        matched_codes.append("10-20")

    # 3. Prioritization/Filtering (Real ML would handle this automatically)
    # Remove duplicates and return
    return list(set(matched_codes))

# --- 3. The Advanced Dispatcher AI Function ---

def advanced_ten_codes_ai(natural_language_phrase: str):
    """
    Translates a complex natural language phrase into the appropriate 10-Code(s).
    """
    print(f"\n--- Input Phrase ---")
    print(f"**Natural Language**: {natural_language_phrase}")
    
    # Get the code predictions from the mock NLP model
    predicted_codes = mock_nlp_model(natural_language_phrase)
    
    if not predicted_codes:
        print("ðŸ¤– **AI Analysis**: No specific 10-Codes identified. Defaulting to 10-4.")
        print(f"**Code Translation**: 10-4 ({TEN_CODES_DB['10-4']})")
        return
        
    # Generate the output message
    code_explanations = [
        f"{code} ({TEN_CODES_DB.get(code, 'Unknown Code')})" 
        for code in predicted_codes
    ]
    
    print(f"\n--- AI Translation ---")
    print(f"ðŸ¤– **Predicted Codes**: {' / '.join(predicted_codes)}")
    print(f"**Code Translation**: {', '.join(code_explanations)}")
    

# --- Execution Simulation (Main Program) ---

if __name__ == "__main__":
    print("## Advanced 10-Codes NLP Translator Simulation")
    print("---")
    
    # Example 1: Complex dispatch request
    advanced_ten_codes_ai("We have an accident with injuries on Main St. and need an ambulance quickly.")
    
    # Example 2: Simple status check
    advanced_ten_codes_ai("What is your 20, unit 5?")

    # Example 3: Multiple requirements
    advanced_ten_codes_ai("A drunk driver caused a hit and run crash, send a wrecker.")

    # Example 4: No matching codes
    advanced_ten_codes_ai("Hello, test one two three.")
