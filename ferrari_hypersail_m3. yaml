import numpy as np
import matplotlib.pyplot as plt

# Parameters for Ferrari Hypersail Mach 3
MACH_SPEED = 3.0
ALTITUDE_M = 2.0  # Ground effect height
AIR_DENSITY = 1.225  # kg/m^3 at sea level
SPEED_OF_SOUND = 343  # m/s
VELOCITY = MACH_SPEED * SPEED_OF_SOUND

class FerrariHypersail:
    def __init__(self, mass, surface_area):
        self.mass = mass  # kg
        self.area = surface_area  # m^2
        self.drag_coeff = 0.05  # Ultra-sleek Ferrari aero
        
    def calculate_stagnation_temp(self):
        """Calculates the temperature at the nose cone at Mach 3."""
        t_ambient = 288.15  # Kelvin (15 C)
        # Formula: T_s = T_a * (1 + ((gamma - 1) / 2) * M^2)
        gamma = 1.4
        t_stagnation = t_ambient * (1 + 0.2 * MACH_SPEED**2)
        return t_stagnation - 273.15  # Convert to Celsius

    def calculate_lift_force(self, cl):
        """Dynamic lift including ground effect approximation."""
        lift = 0.5 * AIR_DENSITY * (VELOCITY**2) * self.area * cl
        return lift

# Instance of the Hypersail
ferrari_vessel = FerrariHypersail(mass=4500, surface_area=25)
stag_temp = ferrari_vessel.calculate_stagnation_temp()

print(f"--- Ferrari Hypersail Mach 3 Status ---")
print(f"Velocity: {VELOCITY:.2 m/s}")
print(f"Nose Cone Temperature: {stag_temp:.2f}°C")



import numpy as np

class FerrariMach3Instance:
    """
    Supersonic Ground Effect Instance (SGEI)
    Developed for: https://github.com/gilbertalgordo/dev
    """
    def __init__(self):
        self.mach = 3.0
        self.gamma = 1.4  # Heat capacity ratio for air
        self.ambient_temp_k = 288.15
        self.pressure_pa = 101325
        self.foil_angle = 1.5  # Degrees (Initial Attack Angle)

    def calculate_shock_angle(self, wedge_angle):
        """
        Calculates the Oblique Shock Angle (Beta) for the Hypersail prow.
        Essential for Mach 3 wave-piercing.
        """
        # Theta-Beta-Mach relation approximation
        theta = np.radians(wedge_angle)
        mach_sq = self.mach ** 2
        # Simplified Beta calculation for supersonic flow
        beta = theta * (1 / np.sqrt(mach_sq - 1))
        return np.degrees(beta)

    def thermal_kaizen_feedback(self, skin_temp_c):
        """
        Active cooling adjustment logic. 
        Critical at 400°C+ skin friction levels.
        """
        threshold = 450.0 # Celsius limit for carbon-ceramic
        coolant_flow = 0.0
        
        if skin_temp_c > threshold:
            # Rapid improvement (Kaizen) of cooling flow
            coolant_flow = (skin_temp_c - threshold) * 2.5 
            status = "CRITICAL: ACTIVATING LIQUID NITROGEN VEIL"
        else:
            status = "STABLE: AERO-DYNAMIC COOLING ACTIVE"
            
        return status, coolant_flow

# Execution Log
hypersail = FerrariMach3Instance()
beta_angle = hypersail.calculate_shock_angle(wedge_angle=10.0)
status, flow = hypersail.thermal_kaizen_feedback(482.5)

print(f"--- FERRARI TELEMETRY: INSTANCE ALPHA ---")
print(f"Oblique Shock Wave Angle: {beta_angle:.2f}°")
print(f"Cooling System Status: {status}")
print(f"Coolant Injection Rate: {flow:.1f} L/sec")
