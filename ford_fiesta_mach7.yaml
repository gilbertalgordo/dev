import time
import random

class Mach7HybridSystem:
    def __init__(self, driver_name="Student"):
        self.driver = driver_name
        self.battery_level = 100  # Percentage
        self.is_active = True
        self.spoiler_angle = 0    # Degrees
        self.velocity = 0         # km/h

    def display_hud(self):
        """
        Renders a 3D-style HUD readout in the console.
        """
        print(f"\n--- [ MACH 7 HYBRID HUD | {self.driver.upper()} ] ---")
        print(f"STATUS: {'STABLE' if self.is_active else 'OFFLINE'}")
        print(f"VELOCITY: {self.velocity} km/h")
        print(f"BATTERY: [{self.render_battery_bar()}] {self.battery_level}%")
        print(f"SPOILER ANGLE: {self.spoiler_angle}° (Active Aero)")
        print("-" * 40)

    def render_battery_bar(self):
        bar_length = 20
        filled = int(self.battery_level / 100 * bar_length)
        return "█" * filled + "-" * (bar_length - filled)

    def update_telemetry(self):
        """
        Kaizen Logic: Incremental improvement of speed 
        while adjusting aero for stability.
        """
        if self.velocity < 180:
            self.velocity += random.randint(5, 15)
            # Deploy spoiler for downforce as speed increases
            if self.velocity > 80:
                self.spoiler_angle = 15
            if self.velocity > 140:
                self.spoiler_angle = 35
        
        # Energy consumption logic
        self.battery_level -= random.randint(1, 3)
        if self.battery_level < 0: 
            self.battery_level = 0
            self.is_active = False

# --- INSTANCE EXECUTION ---
fiesta_m7 = Mach7HybridSystem(driver_name="Student_Alpha")

# Simulation Loop
for _ in range(5):
    if fiesta_m7.is_active:
        fiesta_m7.update_telemetry()
        fiesta_m7.display_hud()
        time.sleep(1)



import asyncio
import random
import time
from dataclasses import dataclass

@dataclass
class VehicleState:
    speed_kph: float = 0.0
    engine_temp: float = 85.0
    battery_charge: float = 100.0
    spoiler_deployment: int = 0  # 0 to 100 percentage
    is_hybrid_boost_active: bool = False

class Mach7HybridController:
    """
    Advanced HCU (Hybrid Control Unit) for the Ford Fiesta Mach 7.
    Focuses on HD HUD data streaming and Kaizen-based aero-efficiency.
    """
    def __init__(self):
        self.state = VehicleState()
        self.running = True

    async def monitor_aero_system(self):
        """
        Kaizen Logic: Continuously improves downforce 
        efficiency based on speed velocity.
        """
        while self.running:
            # Spoiler Logic: Dynamic adjustment
            if self.state.speed_kph > 120:
                # High-speed stability mode
                self.state.spoiler_deployment = 85
                self.state.is_hybrid_boost_active = True
            elif self.state.speed_kph > 60:
                self.state.spoiler_deployment = 35
            else:
                self.state.spoiler_deployment = 0
            
            await asyncio.sleep(0.5)

    async def stream_hud_telemetry(self):
        """
        Generates HD HUD instances for the driver's display.
        """
        print("\033[H\033[J") # Clear screen for HUD effect
        while self.running:
            hud_output = (
                f"== [ MACH 7 HYBRID | ADVANCED TELEMETRY ] ==\n"
                f" VELOCITY: {self.state.speed_kph:>6.1f} km/h\n"
                f" BATTERY : {self.state.battery_charge:>6.1f}% | "
                f"BOOST: {'[ON]' if self.state.is_hybrid_boost_active else '[OFF]'}\n"
                f" AERO    : {self.state.spoiler_deployment:>6d}% DEPLOYED\n"
                f" ENGINE T: {self.state.engine_temp:>6.1f}°C\n"
                f"==========================================="
            )
            print(hud_output, end='\r')
            
            # Simulated physics
            self.state.speed_kph += random.uniform(-2, 5)
            self.state.battery_charge -= 0.05
            
            if self.state.battery_charge <= 0:
                self.running = False
                print("\n[CRITICAL] Battery Depleted. System shutdown.")
            
            await asyncio.sleep(0.2)
            print("\033[H", end="") # Reset cursor to top for HD refresh

# --- ARCH-ANGEL SYSTEM INITIALIZATION ---
async def main():
    fiesta_controller = Mach7HybridController()
    
    # Run Telemetry and Aero logic concurrently
    await asyncio.gather(
        fiesta_controller.monitor_aero_system(),
        fiesta_controller.stream_hud_telemetry()
    )

if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\n[SYSTEM] Manual override engaged. Logged to dev source.")
