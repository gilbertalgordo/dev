metadata:
  name: "Intelligent Force Field: Perimeter Breach"
  description: "Triggers a high-alert security response if a perimeter sensor is breached while no one is home."
automations:
  # The main 'Force Field' automation
  - starters:
      # Starter: When a monitored door or window sensor is opened
      - type: device.state.OpenClose
        device: Door Sensor - Main Entry # Replace with your actual device name
        state: open
        is: true
    conditions:
      # Condition 1: Check if the home is in 'Away' mode
      - type: home.state.HomePresence
        state: homePresenceMode
        is: AWAY
    actions:
      # Action 1: Sound the alarm (turn a light to flashing red)
      - type: device.command.ColorLoop
        devices: 
          - Lamp - Porch Floodlight # Replace with a high-visibility light
        colorLoop: 
          duration: 30s # Loop the color change for 30 seconds
          colorMode: SPECTRUM 
          colorTemperature: 
            color: 
              name: "red" 
            duration: 1s
      # Action 2: Play the 'Force Field' Warning Announcement
      - type: device.command.TextToSpeech
        devices: 
          - Google Nest Hub - Kitchen # Replace with a Google Home speaker
        speech: "Warning! Force Field integrity breach detected! All defensive systems activating! Contacting primary operator."
      # Action 3: Lock all smart locks to reinforce the perimeter
      - type: device.command.LockUnlock
        devices:
          - Smart Lock - Front Door # Replace with your smart lock device name
          - Smart Lock - Garage Door # Replace with your second smart lock
        lock: true



{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "payload": {
    "commands": [
      {
        "ids": [
          "SECURITY_SYSTEM_ID_123" 
        ],
        "status": "SUCCESS",
        "states": {
          "online": true,
          "isArmed": true,
          "currentArmLevel": "away_key" 
        },
        "execution": [
          {
            "command": "action.devices.commands.ArmDisarm",
            "params": {
              "arm": true,
              "armLevel": "AWAY"
            }
          }
        ]
      }
    ]
  }
}
